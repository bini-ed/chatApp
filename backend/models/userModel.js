const mongoose = require("mongoose");
const Joi = require("joi-browser");

const userModel = mongoose.Schema(
  {
    name: { type: String, required: true },
    email: { type: String, required: true, unique: true },
    password: { type: String, required: true },
    pic: {
      type: String,
      default:
        "data:image/jpeg;base64,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",
    },
  },
  { timestamps: true }
);
const User = mongoose.model("User", userModel);

const validateUser = (User) => {
  const validationSchema = {
    name: Joi.string().required().label("Full Name"),
    email: Joi.string().required().label("Email"),
    password: Joi.string().required().label("Password"),
  };
  return Joi.validate(User, validationSchema);
};

const validateAuth = (user) => {
  const schema = {
    email: Joi.string().required().label("Email"),
    password: Joi.string().required().label("Password"),
  };
  return Joi.validate(user, schema);
};

module.exports = { User, validateUser, validateAuth };
